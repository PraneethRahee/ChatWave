import React, { createContext, useContext, useEffect, useState } from 'react';import io from 'socket.io-client';import { useAuth } from './AuthContext';const SocketContext = createContext();export const SocketProvider = ({ children }) => {  const [socket, setSocket] = useState(null);  const [onlineUsers, setOnlineUsers] = useState([]);  const { user, isAuthenticated } = useAuth();  useEffect(() => {    if (isAuthenticated && user) {      const socketUrl = import.meta.env.VITE_SOCKET_URL || import.meta.env.VITE_API_URL || 'http:      const newSocket = io(socketUrl, { withCredentials: true });      newSocket.emit('userConnected', user._id);      setSocket(newSocket);      return () => {        newSocket.disconnect();      };    } else {      if (socket) {        socket.disconnect();        setSocket(null);      }    }  }, [isAuthenticated, user]);  useEffect(() => {    if (!socket) return;    socket.on('getOnlineUsers', (users) => {      setOnlineUsers(users);    });    return () => {      socket.off('getOnlineUsers');    };  }, [socket]);  const joinRoom = (roomId) => {    if (socket) {      socket.emit('joinRoom', roomId);    }  };  const leaveRoom = (roomId) => {    if (socket) {      socket.emit('leaveRoom', roomId);    }  };  const sendMessage = (messageData) => {    if (socket) {      socket.emit('chatMessage', messageData);    }  };  const sendTyping = (roomId) => {    if (socket) {      socket.emit('typing', { roomId, userId: user._id });    }  };  const sendStopTyping = (roomId) => {    if (socket) {      socket.emit('stopTyping', { roomId, userId: user._id });    }  };  return (    <SocketContext.Provider      value={{        socket,        onlineUsers,        joinRoom,        leaveRoom,        sendMessage,        sendTyping,        sendStopTyping,      }}    >      {children}    </SocketContext.Provider>  );};export const useSocket = () => {  const context = useContext(SocketContext);  if (!context) {    throw new Error('useSocket must be used within a SocketProvider');  }  return context;};export default SocketContext;